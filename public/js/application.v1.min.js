var hermes=angular.module("hermes",["ui.router","ngResource","ui.materialize"]);hermes.constant("config",{apiKey:"AIzaSyB5iw0dc-qipE6iIEeoezD2oetkHh0s8ls",databaseURL:"http://hermes.api.dev",equipos:"/equipos",servidores:"/servidores",switches:"/switches",puertos:"/puertos",vlans:"/vlans",version:"0.1.2"});hermes.config(function($httpProvider){$httpProvider.defaults.headers.common={};$httpProvider.defaults.headers.post={};$httpProvider.defaults.headers.put={};$httpProvider.defaults.headers.patch={}});
hermes.config(function($stateProvider,$urlRouterProvider,$httpProvider){function wherever_we_are(are){var are=window.location;return are.origin+are.pathname}$urlRouterProvider.otherwise("/");$stateProvider.state("index",{url:"/",templateUrl:wherever_we_are()+"view/login.html",controller:"login_controller"}).state("login",{url:"/login",templateUrl:wherever_we_are()+"view/login.html",controller:"login_controller"}).state("forget",{url:"/forget",templateUrl:wherever_we_are()+"view/forget.html",controller:"forget_controller"}).state("register",{url:"/register",templateUrl:wherever_we_are()+"view/register.html",controller:"register_controller"}).state("dashboard",{url:"/dashboard",templateUrl:wherever_we_are()+"view/dashboard.html",controller:"dashboard_controller"}).state("servidores",{url:"/servidores",templateUrl:wherever_we_are()+"view/servidores.html",controller:"servidores_controller"}).state("equipos",{url:"/equipos",templateUrl:wherever_we_are()+"view/equipos.html",controller:"equipos_controller"}).state("switches",{url:"/switches",templateUrl:wherever_we_are()+"view/switches.html",controller:"switches_controller"}).state("single_switche",{url:"/switches/:id",templateUrl:wherever_we_are()+"view/single-switches.html",controller:"single_switches_controller"})});
hermes.controller("dashboard_controller",function($scope,Equipos,materialize){Equipos.getAll(function(equipos){$scope.equipos=equipos.data;$(".progress").addClass("hide");$(".loadnow").addClass("hide");$(".table__content").removeClass("hide")})});
hermes.controller("equipos_controller",function($scope,Equipos,materialize){Equipos.getAll(function(equipos){$scope.equipos=equipos.data;$(".progress").addClass("hide");$(".loadnow").addClass("hide");$(".table__content").removeClass("hide")})});
hermes.controller("forget_controller",function($scope,$location,$window){console.log("Recuperar la contrase√±a de los usuarios")});
hermes.controller("login_controller",function(config,$scope,$window){console.log("Credenciales de identificacion de los usuarios")});
hermes.controller("nav",function(){$(".tooltipped").tooltip({delay:50})});
hermes.controller("register_controller",function($scope){console.log("Registro de nuevos usuarios")});
hermes.controller("servidores_controller",function($scope,Servidores,materialize){Servidores.getAll(function(equipos){$scope.equipos=equipos.data;$(".progress").addClass("hide");$(".loadnow").addClass("hide");$(".table__content").removeClass("hide")})});
hermes.controller("single_switches_controller",function($scope,$resource,$http,$stateParams,Progres,Query,materialize,config){Query.getUrl(config.databaseURL+config.switches+"/"+$stateParams.id);Query.getAll(function(sw){$scope.switche=sw.data});var swPuerto=config.databaseURL+config.switches+"/puertos";Query.getPort(function(sw,error,swPuerto){$scope.swPuerto=sw.data})});
hermes.controller("switches_controller",function($scope,$resource,$http,Progres,Switches,Equipos,materialize,config){Switches.getAll(function(sw){$scope.switches=sw.data});Equipos.getAll(function(eq){$scope.equipos=eq.data});$scope.sw={};$scope.crearSW=function(datos){Switches.sendNudes(function(datos){Materialize.toast("Tu switche se esta creando",4e3)})}});
hermes.factory("SwitchesFactory",function($resource,config){return $resource(config.databaseURL+config.switches)});
hermes.service("Equipos",function($http,config){this.getAll=function(success,failure){$http.get(config.databaseURL+config.equipos).success(success).error(failure)}});
hermes.service("materialize",function(){$("ul.tabs").tabs();$(".button-create").sideNav({menuWidth:500,draggable:true});$(".button-edit").sideNav({menuWidth:600,edge:"left",draggable:true});$("select").material_select();$(".dropdown-button").dropdown()});
hermes.service("Progres",function(){$(".progress").addClass("hide");$(".loadnow").addClass("hide");$(".table__content").removeClass("hide")});
hermes.service("Query",function($http,config){this.getUrl=function(url){this.url=url};this.getPort=function(success,failure,swPuerto){$http.get(url).success(success).error(failure)};this.getAll=function(success,failure){$http.get(this.url).success(success).error(failure)}});
hermes.service("Servidores",function($http,config){this.getAll=function(success,failure){$http.get(config.databaseURL+config.servidores).success(success).error(failure)}});
hermes.service("Switches",function($http,config){this.getAll=function(success,failure){$http.get(config.databaseURL+config.switches).success(success).error(failure)};this.sendNudes=function(datos){$http({url:config.databaseURL+config.switches,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(datos)}).then(function(response){Materialize.toast("Tu switche fue creado",4e3);console.log("success");console.log(JSON.stringify(response))},function(response){Materialize.toast("Ocurrio un error",4e3);console.log("failed");console.log(JSON.stringify(response))})}});
if(navigator.serviceWorker){navigator.serviceWorker.register("sw.js").then(function(registration){console.log("ServiceWorker registration successful with scope:",registration.scope)}).catch(function(error){console.log("ServiceWorker registration failed:",error)})}

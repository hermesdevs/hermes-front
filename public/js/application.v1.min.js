var hermes=angular.module("hermes",["ui.router","ui.materialize"]);hermes.constant("config",{databaseURL:"http://hermes.api.dev",usuarios:"/usuarios",equipos:"/equipos",servidores:"/servidores",switches:"/switches",puertos:"/puertos",vlans:"/vlans",version:"0.1.2"});hermes.constant("Switches",{general:"http://hermes.api.dev/switches",single:"http://hermes.api.dev/switches/",home:"/#/switches"});hermes.constant("Servidores",{general:"http://hermes.api.dev/servidores",single:"http://hermes.api.dev/servidores/",home:"/#/servidores"});hermes.constant("Equipos",{general:"http://hermes.api.dev/equipos",single:"http://hermes.api.dev/equipos/",home:"/#/equipos"});hermes.constant("Puertos",{general:"http://hermes.api.dev/puertos",single:"http://hermes.api.dev/puertos/"});hermes.constant("User",{general:"http://hermes.api.dev/usuarios",single:"http://hermes.api.dev/usuarios/",home:"/#/admin"});
hermes.config(function($stateProvider,$urlRouterProvider,$httpProvider){function wherever_we_are(are){var are=window.location;return are.origin+are.pathname}$urlRouterProvider.otherwise("/");$stateProvider.state("index",{url:"/",templateUrl:wherever_we_are()+"view/login.html",controller:"login_controller"}).state("login",{url:"/login",templateUrl:wherever_we_are()+"view/login.html",controller:"login_controller"}).state("forget",{url:"/forget",templateUrl:wherever_we_are()+"view/forget.html",controller:"forget_controller"}).state("register",{url:"/register",templateUrl:wherever_we_are()+"view/register.html",controller:"register_controller"}).state("register_admin",{url:"/register/admin",templateUrl:wherever_we_are()+"view/register_admin.html",controller:"register_admin_controller"}).state("dashboard",{url:"/dashboard",templateUrl:wherever_we_are()+"view/dashboard.html",controller:"dashboard_controller"}).state("servidores",{url:"/servidores",templateUrl:wherever_we_are()+"view/servidores.html",controller:"servidores_controller"}).state("switches",{url:"/switches",templateUrl:wherever_we_are()+"view/switches.html",controller:"switches_controller"}).state("equipos",{url:"/equipos",templateUrl:wherever_we_are()+"view/equipos.html",controller:"equipos_controller"}).state("settings",{url:"/settings",templateUrl:wherever_we_are()+"view/settings.html",controller:"settings_controller"}).state("profile",{url:"/me",templateUrl:wherever_we_are()+"view/profile.html",controller:"profile_controller"}).state("admin",{url:"/admin",templateUrl:wherever_we_are()+"view/admin.html",controller:"admin_controller"}).state("single_user",{url:"/admin/:id",templateUrl:wherever_we_are()+"view/single-user.html",controller:"single_user_controller"}).state("net",{url:"/conexiones",templateUrl:wherever_we_are()+"view/net.html",controller:"net_controller"}).state("single_switche",{url:"/switches/:id",templateUrl:wherever_we_are()+"view/single-switches.html",controller:"single_switches_controller"}).state("single_equipo",{url:"/equipos/:id",templateUrl:wherever_we_are()+"view/single-equipos.html",controller:"single_equipos_controller"}).state("single_servidores",{url:"/servidores/:id",templateUrl:wherever_we_are()+"view/single-servidores.html",controller:"single_servidores_controller"})});
hermes.controller("admin_controller",function($scope,$window,User,Query,Progres,Auth){Query.getAll(User.general,function(usuarios){$scope.usuarios=usuarios.data;Progres.loaded()});function randomString(){var text=" ";var posissible="ABCDFGHIJKLMNOPQRSTUVWXYZabcdfghijklmnopqrstuvwxyz";for(var i=0;i<32;i++)text+=posissible.charAt(Math.floor(Math.random()*posissible.length));return text}$scope.userRegister={super_permission:0,remember_token:randomString()};$scope.AuthRegister=function(user){Progres.progressloading();Auth.registerUser($scope.userRegister);document.getElementById("quickstart-sign-up").disabled=true};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("create_modal",function($scope){$(".button-create").sideNav({menuWidth:500,draggable:true})});
hermes.controller("dashboard_controller",function($scope,Progres,Query,Auth,Switches,Servidores,Equipos,Puertos){Auth.getUser(localStorage.id,function(user){$scope.user=user.data;$scope.user.active=true});Query.getAll(Switches.general,function(switches){$scope.switches=switches.data;Progres.loaded()});Query.getAll(Servidores.general,function(servidores){$scope.servidores=servidores.data;Progres.loaded()});Query.getAll(Equipos.general,function(equipos){$scope.equipos=equipos.data;Progres.loaded()});Query.getAll(Puertos.general,function(puertos){$scope.puertos=puertos.data;Progres.loaded()});$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("equipos_controller",function($scope,Query,Equipos,Progres){Query.getAll(Equipos.general,function(equipos){$scope.equipos=equipos.data;Progres.loaded();for(var i=0;i<equipos.data.length;i++){console.log(equipos.data[i].name);$("#tablaEquipos").append("<tr><td>"+equipos.data[i].id+"</td><td>"+equipos.data[i].name+"</td><td>"+equipos.data[i].so+"</td><td>"+equipos.data[i].brand+"</td><td>"+equipos.data[i].model+"</td><td>"+equipos.data[i].mac+"</td><td>"+equipos.data[i].ip+"</td></tr>")}var pdf=new jsPDF("p","pt","letter");pdf.cellInitialize();pdf.setFontSize(10);$.each($("#tablaEquipos tr"),function(i,row){$.each($(row).find("td, th"),function(j,cell){var txt=$(cell).text().trim()||" ";var width=j==7?40:70;pdf.cell(10,50,width,30,txt,i)})});$scope.printPDF=function(){pdf.save("registro-de-equipos.pdf");Materialize.toast("Generando ...",4e3);console.log("Imprimir")}});$scope.equipo={};$scope.crearEquipos=function(datos){Query.sendNudes(Equipos.general,datos)};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("forget_controller",function($scope,$location,$window){console.log("Recuperar la contraseña de los usuarios")});
hermes.controller("indexController",function(Session){console.info("%c Hermes","color:#3f51b5;font-size:3.2em;")});
hermes.controller("login_controller",function($scope,Auth,Progres){$scope.AuthLogin=function(user){Progres.progressloading();Auth.login(user);document.getElementById("quickstart-sign-in").disabled=true}});
hermes.controller("nav",function($scope,$window,Session){$scope.typeUser=localStorage.super_permission;$scope.logout=function(){Session.destroyUser();$window.location.href="#/"}});
hermes.controller("net_controller",function($scope,$location,$window,Progres,Query,config){console.log("Anidaciones para siempre")});
hermes.controller("profile_controller",function($scope,Progres,Auth){Auth.getUser(localStorage.id,function(user){$scope.user=user.data;$scope.user.active=true;Progres.loaded()});$scope.updateInfoUser=function(datos){Auth.updateUser(localStorage.id,datos);Progres.loaded()}});
hermes.controller("register_controller",function($scope,Progres,Auth){function randomString(){var text=" ";var posissible="ABCDFGHIJKLMNOPQRSTUVWXYZabcdfghijklmnopqrstuvwxyz";for(var i=0;i<32;i++)text+=posissible.charAt(Math.floor(Math.random()*posissible.length));return text}$scope.user={super_permission:0,remember_token:randomString()};$scope.AuthRegister=function(user){Progres.progressloading();Auth.register($scope.user);document.getElementById("quickstart-sign-up").disabled=true}});
hermes.controller("register_admin_controller",function($scope,Progres,Auth){function randomString(){var text=" ";var posissible="ABCDFGHIJKLMNOPQRSTUVWXYZabcdfghijklmnopqrstuvwxyz";for(var i=0;i<32;i++)text+=posissible.charAt(Math.floor(Math.random()*posissible.length));return text}$scope.user={super_permission:1,remember_token:randomString()};$scope.AuthRegister=function(user){Progres.progressloading();Auth.register($scope.user);document.getElementById("quickstart-sign-up").disabled=true}});
hermes.controller("servidores_controller",function($scope,Progres,Servidores,Query){Query.getAll(Servidores.general,function(servidores){$scope.servidores=servidores.data;Progres.loaded();for(var i=0;i<servidores.data.length;i++){console.log(servidores.data[i].name);$("#tablaEquipos").append("<tr><td>"+servidores.data[i].id+"</td><td>"+servidores.data[i].name+"</td><td>"+servidores.data[i].ip+"</td><td>"+servidores.data[i].mac+"</td><td>"+servidores.data[i].so+"</td><td>"+servidores.data[i].description+"</td></tr>")}var pdf=new jsPDF("p","pt","letter");pdf.cellInitialize();pdf.setFontSize(10);$.each($("#tablaServidores tr"),function(i,row){$.each($(row).find("td, th"),function(j,cell){var txt=$(cell).text().trim()||" ";var width=j==7?40:70;pdf.cell(10,50,width,30,txt,i)})});$scope.printPDF=function(){pdf.save("registro-de-servidores.pdf");Materialize.toast("Generando ...",4e3);console.log("Imprimir")}});$scope.servidor={};$scope.crearServidor=function(datos){Query.sendNudes(Servidores.general,datos)};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("settings_controller",function($scope,$location,$window,Progres,Query,config){console.log("Configuraciones")});
hermes.controller("single_equipos_controller",function($scope,Query,Equipos,$stateParams,Progres){var ruta=Equipos.single+$stateParams.id;Query.getAll(ruta,function(equipo){$scope.equipo=equipo.data;Progres.loaded()});$scope.update=function(datos){Progres.progressloading();Query.updateDates(ruta,datos)};$scope.delete=function(){Progres.progressloading()};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("single_servidores_controller",function($scope,$stateParams,Progres,Query,Servidores){var ruta=Servidores.single+$stateParams.id;Query.getAll(ruta,function(servidor){$scope.servidor=servidor.data;Progres.loaded()});$scope.update=function(datos){Progres.progressloading();Query.updateDates(ruta,datos)};$scope.delete=function(){Progres.progressloading();Query.killme(ruta)};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("single_switches_controller",function($scope,Switches,$stateParams,Progres,Query){var ruta=Switches.single+$stateParams.id;Query.getAll(ruta,function(sw){$scope.switche=sw.data;Progres.loaded()});$scope.update=function(datos){Progres.progressloading();Query.updateDates(ruta,datos)};$scope.delete=function(){Progres.progressloading();var confirma=confirm("¿Quieres eliminar este Swtiche y todas sus conexiones?");if(confirma===true){Query.killme(ruta,Switches.home)}else{console.log("Se cancelo la eliminacion del swtiche "+$stateParams.id)}Progres.loaded_single()};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});hermes.controller("puertos_validate",function($scope,Switches,Equipos,Servidores,$stateParams,Progres,Query,config){for(var p=1;p<49;p++){$("#puertosOptions").append("<option value="+p+"> Puerto fa0/"+p+"</option>")}var switcheEquipos=Switches.single+$stateParams.id+config.equipos;Query.getAll(switcheEquipos,function(equipo){var equipos=new Array;var obtenerDatos=function(url){var consulta=$.ajax({url:url,async:false,success:function(success){equipos.push(success.data)}});return consulta};for(var i=0;i<equipo.data.length;i++){obtenerDatos(config.databaseURL+config.equipos+"/"+equipo.data[i].id+config.puertos)}console.log("Equipos validate",equipos)})});
hermes.controller("switches_controller",function($scope,Switches,Progres,Query){Query.getAll(Switches.general,function(switches){$scope.switches=switches.data;Progres.loaded();for(var i=0;i<switches.data.length;i++){console.log(switches.data[i].name);$("#tablaEquipos").append("<tr><td>"+switches.data[i].id+"</td><td>"+switches.data[i].name+"</td><td>"+switches.data[i].model+"</td><td>"+switches.data[i].so+"</td><td>"+switches.data[i].ip+"</td></tr>")}var pdf=new jsPDF("p","pt","letter");pdf.cellInitialize();pdf.setFontSize(10);$.each($("#tablaSwitche tr"),function(i,row){$.each($(row).find("td, th"),function(j,cell){var txt=$(cell).text().trim()||" ";var width=j==7?40:70;pdf.cell(10,50,width,30,txt,i)})});$scope.printPDF=function(){pdf.save("registro-de-switches.pdf");Materialize.toast("Generando ...",4e3);console.log("Imprimir")}});$scope.crearSW=function(datos){Query.sendNudes(Switches.general,datos)};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.controller("switches_puertos_equipos",function($scope,Switches,$stateParams,Progres,Query,config){$scope.delete_relation=function(puerto,equipo){Progres.progressloading();var confirma=confirm("¿Quieres eliminar esta conexion?");if(confirma===true){console.log(puerto);console.log(equipo);Query.fatality(config.databaseURL+config.switches+"/"+$stateParams.id+config.equipos+"/"+equipo,function(success){Materialize.toast("El equipo se esta desconectando del switche ...",3e3);console.log(JSON.stringify(success.data))});Query.fatality(config.databaseURL+config.equipos+"/"+equipo+config.puertos+"/"+puerto,function(success){Materialize.toast("El equipo se desenlazo correctamente",3e3);console.log(JSON.stringify(success.data))})}else{console.log("Se cancelo la eliminacion de la relacion "+$stateParams.id)}Progres.loaded()};var switcheEquipos=Switches.single+$stateParams.id+config.equipos;Query.getAll(switcheEquipos,function(equipo){var equipos=new Array;var obtenerDatos=function(url){var consulta=$.ajax({url:url,async:false,success:function(success){equipos.push(success.data)}});return consulta};for(var i=0;i<equipo.data.length;i++){obtenerDatos(config.databaseURL+config.equipos+"/"+equipo.data[i].id+config.puertos)}var equiposPuertos={all:equipos};console.log("Equipos",equipos);$scope.equiposPuertos=equiposPuertos.all;Progres.loaded_single("#equiposload")},function(error){if(error.code===404){var puertos=new Array;var puertosEquipos={all:puertos};$scope.puertosEquipos=puertosEquipos.all;Progres.loaded_single("#equiposload")}})});hermes.controller("add_equipos_switches",function($scope,$stateParams,Switches,Equipos,config,Query,Progres){var switcheEquipos=config.databaseURL+config.equipos+config.switches;Query.getAll(switcheEquipos,function(equiposConstructor){for(var i=0;i<equiposConstructor.length;i++){if(equiposConstructor[i].switche.length>0){$("#equiposOptions").append("<option value="+equiposConstructor[i].id+" disabled>"+equiposConstructor[i].name+"</option>")}else{$("#equiposOptions").append("<option value="+equiposConstructor[i].id+">"+equiposConstructor[i].name+"</option>")}}});$scope.PuertoEquipo=function(relation){Progres.progressloading();Query.createRelation(config.databaseURL+config.switches+"/"+$stateParams.id+config.equipos+"/"+relation.element1,function(success){Materialize.toast("El equipo se esta conectando al switche ...",3e3);console.log(JSON.stringify(success.data))});Query.createRelation(config.databaseURL+config.equipos+"/"+relation.element1+config.puertos+"/"+relation.element2,function(success){Materialize.toast("El equipo se conecto existosamente en el puerto "+relation.element2,3e3);console.log(JSON.stringify(success.data))})}});
hermes.controller("switches_puertos_servidores",function($scope,Switches,$stateParams,Progres,Query,config){$scope.delete_relation=function(puerto,equipo){Progres.progressloading();var confirma=confirm("¿Quieres eliminar esta conexion?");if(confirma===true){console.log(puerto);console.log(equipo);Query.fatality(config.databaseURL+config.switches+"/"+$stateParams.id+config.equipos+"/"+equipo,function(success){Materialize.toast("El equipo se esta desconectando del switche ...",3e3);console.log(JSON.stringify(success.data))});Query.fatality(config.databaseURL+config.equipos+"/"+equipo+config.puertos+"/"+puerto,function(success){Materialize.toast("El equipo se desenlazo correctamente",3e3);console.log(JSON.stringify(success.data))})}else{console.log("Se cancelo la eliminacion de la relacion "+$stateParams.id)}Progres.loaded()};var switcheEquipos=Switches.single+$stateParams.id+config.servidores;Query.getAll(switcheEquipos,function(servidor){var servidores=new Array;var obtenerDatos=function(url){var consulta=$.ajax({url:url,async:false,success:function(success){servidores.push(success.data)}});return consulta};for(var i=0;i<servidor.data.length;i++){obtenerDatos(config.databaseURL+config.servidores+"/"+servidor.data[i].id+config.puertos)}var servidoresPuertos={all:servidores};$scope.puertosServidores=servidoresPuertos.all;Progres.loaded_single("#servidoresload")},function(error){if(error.code===404){var servidores=new Array;var servidoresPuertos={all:servidores};$scope.puertosServidores=servidoresPuertos.all;Progres.loaded_single("#servidoresload")}})});hermes.controller("add_servidores_switches",function($scope,$stateParams,config,Query,Progres){var switcheServidores=config.databaseURL+config.servidores+config.switches;Query.getAll(switcheServidores,function(servidoresConstructor){console.log("Servidores",servidoresConstructor);for(var i=0;i<servidoresConstructor.length;i++){if(servidoresConstructor[i].switche!=null){$("#servidoresOptions").append("<option value="+servidoresConstructor[i].id+" disabled>"+servidoresConstructor[i].name+"</option>")}else{$("#servidoresOptions").append("<option value="+servidoresConstructor[i].id+">"+servidoresConstructor[i].name+"</option>")}}});$scope.PuertoServidor=function(relation){Progres.progressloading();Query.createRelation(config.databaseURL+config.switches+"/"+$stateParams.id+config.servidores+"/"+relation.element1,function(success){Materialize.toast("El servidor se esta conectando al switche ...",3e3);console.log(JSON.stringify(success.data))});Query.createRelation(config.databaseURL+config.servidores+"/"+relation.element1+config.puertos+"/"+relation.element2,function(success){Materialize.toast("El servidor se conecto existosamente en el puerto "+relation.element2,3e3);console.log(JSON.stringify(success.data))});Progres.progressloaded()}});
hermes.controller("switches_puertos_switches",function($scope,Switches,$stateParams,Progres,Query,config){var ruta=Switches.single+$stateParams.id+config.puertos;Query.getAll(ruta,function(puertosFrist){var puertos=new Array;var obtenerDatos=function(url){var consulta=$.ajax({url:url,async:false,success:function(success){puertos.push(success.data)}});return consulta};for(var i=0;i<puertosFrist.data.length;i++){obtenerDatos(config.databaseURL+config.puertos+"/"+puertosFrist.data[i].id+config.swtiches)}var puertosSwitche={all:puertos};$scope.puertosSwitche=puertosSwitche.all;Progres.loaded_single()})});
hermes.controller("single_user_controller",function($scope,$stateParams,$window,User,Query,Progres){var ruta=User.single+$stateParams.id;Query.getAll(ruta,function(usuario){$scope.user=usuario.data;Progres.loaded()});$scope.updateInfoUser=function(datos){Progres.progressloading();Query.updateDates(ruta,datos)};$scope.delete=function(){Progres.progressloading();var confirma=confirm("¿Quieres eliminar este Usuario y todas sus conexiones?");if(confirma===true){Query.killme(ruta,User.home)}else{console.log("Se cancelo la eliminacion del swtiche "+$stateParams.id)}Progres.loaded_single()};$scope.verModulos=function(){Materialize.toast("Esta funcion aun no esta lista",4e3)}});
hermes.directive("preloader",function(){return{restrict:"EA",templateUrl:"../view/directives/preloader.html",directivaExiste:function(){console.log("Directiva funciona")}}});

hermes.service("Auth",function($http,$window,$location,config,Progres,Session){var that=this;this.getUser=function(userID,success,failure){$http.get(config.databaseURL+config.usuarios+"/"+userID).success(success).error(failure)};this.updateUser=function(userID,datos){$http({url:config.databaseURL+config.usuarios+"/"+userID,method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(datos)}).success(function(success){Materialize.toast("Los datos de usuario fueron actualizados",4e3);$(".progress-update").addClass("hide")}).error(function(error){Materialize.toast("Ocurrio un error al actualizar tus datos",4e3);console.log(JSON.stringify(error))})};this.login=function(user,success,failure){$http({url:config.databaseURL+"/auth/login",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(user)}).then(function(success){Session.saveUser(success.data.data[0].id);$window.location.href="#/dashboard"},function(error){if(error.status=="402"){Materialize.toast("La contraseña es incorrecta",3e3);document.getElementById("quickstart-sign-in").disabled=false;Progres.progressloaded()}else if(error.status=="404"){Materialize.toast("No hay un usuario registrado con este correo",6e3);document.getElementById("quickstart-sign-in").disabled=false;Progres.progressloaded()}else{console.log(JSON.stringify(error));Materialize.toast("Ocurrio un error desconocido al intentar acceder",6e3);document.getElementById("quickstart-sign-in").disabled=false;Progres.progressloaded()}})};this.register=function(user,success,failure){$http({url:config.databaseURL+"/auth/register",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(user)}).then(function(success){Materialize.toast("Bienvenido - Ahora eres usuario de Hermes",4e3);Progres.progressloaded();console.log(success.data.data.id);Session.saveUser(success.data.data.id);$window.location.href="#/dashboard"},function(error){console.log(JSON.stringify(error));if(error.status=="402"){Materialize.toast("Este correo ya esta en uso por otro usuario",3e3);document.getElementById("quickstart-sign-up").disabled=false;Progres.progressloaded()}else{console.log(JSON.stringify(error));Materialize.toast("Ocurrio un error desconocido al intentar registrarte",6e3);document.getElementById("quickstart-sign-up").disabled=false;Progres.progressloaded()}})};this.registerAdmin=function(user,success,failure){$http({url:config.databaseURL+"/auth/register",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(user)}).then(function(success){Materialize.toast("Bienvenido - Ahora eres usuario administrador de Hermes",4e3);Progres.progressloaded();console.log(success.data.data.id);Session.saveUser(success.data.data.id);$window.location.href="#/dashboard"},function(error){console.log(JSON.stringify(error));if(error.status=="402"){Materialize.toast("Este correo ya esta en uso por otro usuario",3e3);document.getElementById("quickstart-sign-up").disabled=false;Progres.progressloaded()}else{console.log(JSON.stringify(error));Materialize.toast("Ocurrio un error desconocido al intentar registrarte",6e3);document.getElementById("quickstart-sign-up").disabled=false;Progres.progressloaded()}})};this.registerUser=function(user,success,failure){$http({url:config.databaseURL+"/auth/register",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(user)}).then(function(success){Materialize.toast("El usuario fue registrado",4e3);Progres.progressloaded()},function(error){console.log(JSON.stringify(error));if(error.status=="402"){Materialize.toast("Este correo ya esta en uso por otro usuario",3e3);document.getElementById("quickstart-sign-up").disabled=false;Progres.progressloaded()}else{console.log(JSON.stringify(error));Materialize.toast("Ocurrio un error desconocido al intentar registrarte",6e3);document.getElementById("quickstart-sign-up").disabled=false;Progres.progressloaded()}})}});
hermes.service("materialize",function(){$(".button-edit").sideNav({menuWidth:600,edge:"left",draggable:true});$("select").material_select();$(".dropdown-button").dropdown()});
hermes.service("Progres",function(){this.progressloading=function(argument){$(".progress-update").removeClass("hide")};this.progressloaded=function(argument){$(".progress-update").addClass("hide")};this.loaded=function(argument){$(".load").addClass("hide");$(".table__content").removeClass("hide");$(".btn").removeClass("disabled");$(".progress-load").addClass("hide")};this.loaded_single=function(elemento){$(elemento).addClass("hide")};this.itsClear=function(argument){$(".loadClear").removeClass("hide")};this.fuckMenSalioMal=function(argument){$(".loadError").removeClass("hide")}});
hermes.service("Query",function($http,$window,config){this.getAll=function(urlDefine,success,failure){$http.get(urlDefine).success(success).error(failure)};this.sendNudes=function(urlDefine,datos){$http({url:urlDefine,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(datos)}).then(function(success){Materialize.toast("El elemento fue creado",4e3);console.log(JSON.stringify(success))},function(err){Materialize.toast("Ocurrio un error al crear el elemento",4e3);console.log(JSON.stringify(err))})};this.updateDates=function(urlDefine,datos){$http({url:urlDefine,method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(datos)}).success(function(success){Materialize.toast("Tu elemento fue actualizado",4e3);$(".progress-update").addClass("hide")}).error(function(error){Materialize.toast("Ocurrio un error al actualizar el elemento",4e3);console.log(JSON.stringify(error))})};this.killme=function(urlDefine,goHome){$http.delete(urlDefine).success(function(success){Materialize.toast("El elemento fue eliminado",4e3);console.log(success);$window.location.href=goHome}).error(function(error){Materialize.toast("Ocurrio un error al eliminar el elemento",4e3);console.log(error)})};this.createRelation=function(dataUri,success,error){$http({url:dataUri,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(success).error(function(error){Materialize.toast("Ocurrio un error desconocido",4e3);console.log(JSON.stringify(error.data))})};this.fatality=function(dataUri,success,error){$http({url:dataUri,method:"DELETE",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(success).error(function(error){Materialize.toast("Ocurrio un error desconocido",4e3);console.log(JSON.stringify(error.data))})}});
hermes.service("Session",function($http,config){this.saveUser=function(userId){localStorage.setItem("id",userId);$http.get(config.databaseURL+config.usuarios+"/"+userId).success(function(userForLocal){var u=userForLocal.data;localStorage.setItem("name",u.name);localStorage.setItem("name",u.name);localStorage.setItem("state","active");localStorage.setItem("super_permission",u.super_permission);localStorage.setItem("token",u.remember_token)}).error(function(error){console.log(error)})};this.destroyUser=function(){var infoUser=["id","name","mail","state","token"];for(var i=0;i<infoUser.length;i++){localStorage.removeItem(infoUser[i])}console.warn("Cerrando session")}});(function(){var that=this;this.userId=localStorage.id;var opciones=[undefined,"number","string"];if(typeof this.userId==opciones[0]||this.userId===undefined){destroyUser();$(location).attr("href","#/");console.warn("El usuario no esta identidicado")}else if(typeof this.userId===undefined&&window.location.hash==="#/register/admin"){console.info("Registrando un administrador")}else if(typeof this.userId===undefined&&window.location.hash==="#/register/"){console.info("Registrando un usuario comun")}else if(typeof this.userId!==undefined&&window.location.hash==="#/login"||window.location.hash==="#/register"||window.location.hash==="#/"){$(location).attr("href","#/dashboard");console.info("Hay una session iniciada")}else if(isNaN(this.userId)===false&&typeof this.userId!=undefined){if(window.location.hash==="#/login"||window.location.hash==="#/register"||window.location.hash==="#/"){$(location).attr("href","#/dashboard")}console.info("Hay una session iniciada");observadorStateSession()}else{console.warn("Algo salio muy mal")}function observadorStateSession(){setTimeout(function(){if(isNaN(that.userId)===false&&typeof that.userId!=undefined){console.info("La session es estable");observadorStateSession()}else{destroyUser()}},1e4)}function destroyUser(){var infoUser=["id","name","mail","state","token"];for(var i=0;i<infoUser.length;i++){localStorage.removeItem(infoUser[i])}console.warn("Necesitas iniciar sesion para obtener tus credenciales")}})();
if(navigator.serviceWorker){navigator.serviceWorker.register("sw.js").then(function(registration){console.log("ServiceWorker registration successful with scope:",registration.scope)}).catch(function(error){console.log("ServiceWorker registration failed:",error)})}
